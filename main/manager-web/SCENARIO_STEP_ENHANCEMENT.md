# 场景步骤配置页面增强功能说明

## 概述
本次更新为场景步骤配置页面添加了多个新功能，包括语速配置、成功条件分支配置和教学相关配置，以支持更智能的AI教学场景。

## 新增功能

### 1. 语速配置 (speech_rate)
- **功能描述**: 支持配置AI语音播放的语速
- **配置选项**: 
  - 0.5倍速 (慢)
  - 0.8倍速 (稍慢) 
  - 1.0倍速 (正常) - 默认值
  - 1.2倍速 (稍快)
  - 1.5倍速 (快)
  - 2.0倍速 (很快)
- **使用场景**: 可以根据教学内容的复杂程度调整语速，帮助儿童更好地理解

### 2. 成功条件分支配置
#### 2.1 完全匹配分支 (exact_match_step_id)
- **功能描述**: 当用户回答完全正确时跳转的步骤
- **配置方式**: 下拉框选择目标步骤
- **视觉提示**: 绿色成功图标

#### 2.2 部分匹配分支 (partial_match_step_id)  
- **功能描述**: 当用户回答部分正确时跳转的步骤
- **配置方式**: 下拉框选择目标步骤
- **视觉提示**: 黄色警告图标

#### 2.3 完全不匹配分支 (no_match_step_id)
- **功能描述**: 当用户回答完全错误时跳转的步骤
- **配置方式**: 下拉框选择目标步骤
- **视觉提示**: 红色错误图标

### 3. 教学相关配置
#### 3.1 正确答案 (correct_response)
- **功能描述**: 设置正确答案，用于教学模式判断
- **输入方式**: 文本输入框

#### 3.2 夸奖消息 (praise_message)
- **功能描述**: 用户回答正确时AI的夸奖内容
- **输入方式**: 多行文本输入框

#### 3.3 鼓励消息 (encouragement_message)
- **功能描述**: 用户回答错误时AI的鼓励内容
- **输入方式**: 多行文本输入框

#### 3.4 超时自动回复 (auto_reply_on_timeout)
- **功能描述**: 用户超时未回答时AI的自动回复
- **输入方式**: 多行文本输入框

#### 3.5 等待时间 (wait_time_seconds)
- **功能描述**: 等待用户回复的时间（秒）
- **配置范围**: 5-60秒
- **默认值**: 10秒

## 页面布局优化

### 1. 字段分组
- **基础配置**: 步骤名称、AI消息、期望关键词等
- **教学配置**: 正确答案、夸奖消息、鼓励消息等
- **分支配置**: 三种成功条件对应的分支步骤选择
- **高级配置**: 音效、手势提示、超时设置等

### 2. 视觉优化
- **分割线**: 使用 `el-divider` 组件清晰分隔不同功能区域
- **提示信息**: 每个分支配置都有相应的图标和说明文字
- **响应式布局**: 支持不同屏幕尺寸的适配

## 技术实现

### 1. 后端实体类更新
- `ScenarioStepEntity.java`: 添加新增字段
- `StepTemplateEntity.java`: 添加语速配置字段
- `ScenarioStepMapper.xml`: 更新查询语句支持新字段

### 2. 前端页面更新
- 新增字段的表单控件
- 数据初始化和验证逻辑
- 样式优化和用户体验改进

### 3. 数据库结构
- 新增字段的数据库表结构
- 相应的索引优化
- 示例数据插入

## 使用说明

### 1. 创建新步骤
1. 点击"添加步骤"按钮
2. 填写基础信息（步骤名称、AI消息等）
3. 配置语速设置
4. 设置成功条件分支（可选）
5. 配置教学相关参数
6. 保存配置

### 2. 配置分支逻辑
1. 在"成功条件分支配置"区域
2. 为每种匹配情况选择对应的下一步骤
3. 系统会根据用户回答的准确程度自动跳转

### 3. 教学参数调优
1. 设置正确答案用于判断
2. 配置夸奖和鼓励消息
3. 调整等待时间和超时设置

## 兼容性说明

- **向后兼容**: 保留了原有的 `next_step_id` 字段
- **默认值**: 新字段都有合理的默认值
- **渐进式**: 可以逐步启用新功能，不影响现有配置

## 注意事项

1. **分支配置**: 建议为每个步骤都配置完整的分支逻辑
2. **语速设置**: 根据目标用户年龄和内容复杂度调整
3. **消息内容**: 夸奖和鼓励消息要符合教育心理学原则
4. **测试验证**: 配置完成后建议进行完整的流程测试

## 未来规划

- 支持更复杂的条件判断逻辑
- 添加语音情感配置
- 集成机器学习优化教学路径
- 支持多语言教学场景
