<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xiaozhi.modules.user.mapper.UserInfoMapper">

    <!-- 根据设备ID查询用户信息 -->
    <select id="getByDeviceId" resultType="xiaozhi.modules.user.entity.UserInfoEntity">
        SELECT * FROM user_info WHERE device_id = #{deviceId}
    </select>

    <!-- 更新用户最后交互时间 -->
    <update id="updateLastInteractionTime">
        UPDATE user_info 
        SET last_interaction_time = NOW() 
        WHERE device_id = #{deviceId}
    </update>

    <!-- 增加交互次数 -->
    <update id="incrementInteractionCount">
        UPDATE user_info 
        SET interaction_count = interaction_count + 1,
            last_interaction_time = NOW()
        WHERE device_id = #{deviceId}
    </update>

</mapper>


