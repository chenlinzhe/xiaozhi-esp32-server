# 对话AI系统思维导图

## 🎯 系统入口
└── 用户输入 (User Input)
    └── ASR (自动语音识别)
        └── 文字 (Text)

## 🔄 模式判断分支
└── 判断文字中包含特定字符
    ├── 自由模式 (Free Mode)
    │   └── redis (状态管理)
    └── 教学模式 (Teaching Mode)
        └── redis (状态管理)

## 💬 聊天状态判断
└── 判断当前聊天状态 (从redis获取)
    ├── 自由聊天 (Free Chat)
    │   └── ↻ 循环回到状态判断
    └── 教学场景 (Teaching Scenario)
        └── ↻ 循环回到状态判断

## 📚 教学场景详细流程
└── 教学场景 (Teaching Scenario)
    └── 输出配置中第一句话
        ├── 🕐 路径A: 超时机制
        │   ├── 开始计时 (5-10秒)
        │   ├── 到时间没回复
        │   └── ↻ 回到教学场景
        └── 💬 路径B: 用户响应处理
            ├── 用户输入语句
            ├── LLM判断, 调用func
            ├── 不合格
            │   ├── 鼓励语言
            │   └── ↻ 回到教学场景
            └── 合格
                ├── 奖励语言
                ├── 配置中的第二句话
                └── ... (继续后续步骤)

## 🔧 系统组件
├── ASR (自动语音识别)
├── LLM (大语言模型)
├── Redis (状态管理)
└── 配置系统 (教学场景配置)

## 📊 关键特性
├── 双模式切换 (自由/教学)
├── 实时状态管理
├── 超时处理机制
├── 智能评估反馈
└── 循环式教学流程

## 🎯 用户交互流程
1. 语音输入 → 文字转换
2. 模式识别 → 状态判断
3. 场景执行 → 响应处理
4. 状态更新 → 循环继续
